## 請說明 SQL Injection 的攻擊原理以及防範方法

攻擊原理: 利用 SOL 的語法，在可輸入的地方放入特殊字元，改變 SQL 語法來抓取想要獲取的資料。

防範方法為使用 `prepare statement` ，可以讓輸入的單引號做特殊處理(類似跳脫字元)，以防止 injection 更改原 SQL 指令。

## 請說明 XSS 的攻擊原理以及防範方法

攻擊原理:輸入一段可以被執行的程式碼在網頁中或網址上，讓使用者只要一點擊網頁就會自動執行惡意程式，XSS 可分為儲存型和反射型以及 DOM 型。

儲存型:常見例子為網頁的留言板或訊息，利用 DataBase 存一段程式碼，讓網頁印出文字的同時就會執行惡意程式。

反射型:把惡意的程式碼藏在網址列裡，誘導使用者點擊連結觸發程式碼。

DOM 型:頁面上如果有使用到 `innerHTML()` 會讓駭客可以把想要執行的 JS 程式碼放到裡面，輸出網頁內容時便會自動執行，防範方法必須要在前端將此改成 `innerText()` 來輸出純文字內容。

防範方法:可以利用 html 內建的 `htmlspecialchars()` 來 escape 字元，讓輸出在網頁上的內容是純文字。 

## 請說明 CSRF 的攻擊原理以及防範方法

CSRF 跨站請求偽造，利用惡意連結讓使用者在不知覺的情況下，向某個已登入的網站發出請求，而使用者卻完全不知覺。

舉例來說:使用者點擊惡意連結瀏覽 A 網站的同時，可能已經向 B 網站發出了請求，這時如果 B 網站的驗證機制做得不夠完善，駭客就可以輕易地用這個人的登入資料登入 B 網站。

防範方法:
1.檢查 Referer，查看這個 domain 來源是否合法，是的話 domain 發出的請求才能接受，但這個方法因為某些瀏覽器或使用者不會帶 Refer 上來，有機會拒絕掉真的使用者的 request，所以這個方法不完善。

2.利用圖形、簡訊等驗證碼，多一道檢查可以更確保是使用者本人發出的請求。

3.server 端隨機產生一個叫做 csrftoken 的值並帶到表單中，之後每次發請求的同時就會把這個 csrftoken 帶上來，並檢查是否跟 server 儲存的值是否一樣。

4. Double Submit Cookie 類似 csrftoken，不過 csrftoken 是把亂數放在 session 裡，而這個是放在 cookie 裡。

5.SameSite Cookie，簡單來說就是幫 cookie 再加一層防禦，有兩種模式`Strict`和`Lax`。

`Strict`比較嚴格，只要不是同一個網站發出的 request 都不會被加上 cookie，也就是說如果從其他 domain 發送來的請求都會被當成使用者未登入的狀態，雖然會造成使用者要不斷重新登入，但好處是比較安全，不會在使用者未知的情況下登入。

`Lax`就比較寬鬆，`<a>`、`<link rel="">`、`<form method="GET">`，這些標籤在使用 GET 方法時仍然可以帶上 cookie，而其他 POST、PUT、DELETE 這些方法就不允許帶上 cookie，這樣在其他網站跳轉登入時就不用重新登入，小缺點是 GET 方法還是有機會被駭客抓到漏洞入侵。 
